{"componentChunkName":"component---src-templates-blog-post-blog-post-jsx","path":"/blog/2021/08/building-your-own-blog-with-gatsby-and-github-pages","result":{"data":{"markdownRemark":{"html":"<br>\n<p><strong>TLDR:</strong> <em>Nowadays, it's becoming harder and harder to stand out from the crowd. If you want to launch your own online presence and show off your tech skills as someone who is starting out in the tech space, then building your own custom blog with <code class=\"language-text\">Gatsby.js</code> could be a great way to do both. You could also deploy your blog (for free!) to GitHub Pages.</em></p>\n<p><em>If you follow this article to the end, you'll have a professional blog site deployed to the web with a homepage that shows a list of article previews and a page for each article. New pages will automatically be generated when you add new content!</em></p>\n<p><strong>Prerequisites:</strong> <em>You'll need some experience with npm and React, and a very basic understanding of the concepts behind GraphQL. You'll also need to be familair with git and GitHub.</em></p>\n<p><strong>Git commits:</strong> <em><a href=\"\">initial commit</a> > <a href=\"\">create components</a> > <a href=\"\">configure gatsby plugins</a> > <a href=\"\">homepage query</a> > <a href=\"\">generate pages dynamically</a> > <a href=\"\">blog post template</a> > <a href=\"\">homepage query</a> > <a href=\"\">first article</a>.</em></p>\n<h1>Introduction</h1>\n<p>Gatsby can serve static React pages, but can also <em>generate</em> static pages from React templates that you create. To add a new page to our site we will just need to write a new markdown (<code class=\"language-text\">.md</code>) file. Gatsby will then fill in the template from our content and generate the page for us - this is what makes the framework so powerful and widely-used for creating a blog.</p>\n<p>We will add metadata to our <code class=\"language-text\">.md</code> files by adding a \"frontmatter\", where we can define any information (in <code class=\"language-text\">yaml</code> syntax) we want, such as the title, date, slug, and author. A frontmatter is prepended to the article <code class=\"language-text\">.md</code> file like so:\n<br></p>\n<deckgo-highlight-code language=\"yaml\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">---\ntitle: &quot;A blog article&quot;\nany_other_property: some-value\n---\n\n...\n</code>\n        </deckgo-highlight-code>\n<br>\n<p>Gatsby uses GraphQL syntax to query the markdown files in our filesystem and pass through the blog content and any metadata to our template as a prop.</p>\n<p>Here's what we're going to do in this article:</p>\n<ol>\n<li>Generate a new Gatsby project in a new git repo connected to a GitHub repo.</li>\n<li>Configure Gatsby with the plugins we're going to need for parsing the markdown into HTML.</li>\n<li>Add our first article markdown file.</li>\n<li>Understand how Gatsby uses GraphQL and write our first query for page content and metadata.</li>\n<li>Dynamically generate the blog pages from our markdown files.</li>\n<li>Create a template to display the blog post pages.</li>\n<li>Deploy our project to GitHub Pages.</li>\n</ol>\n<h1>Step 1 - Generate a new Gatsby project</h1>\n<p>To generate a new Gatsby project, run:</p>\n<br>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">npm init gatsby</code>\n        </deckgo-highlight-code>\n<br>\n<p>Name your project \"<code class=\"language-text\">blog</code>\" and put it in a folder of the same name. Don't add any CMS (<code class=\"language-text\">No (or I'll add it later)</code>). I also chose to install <code class=\"language-text\">styled-components</code> to use in my project as a styling library. When given the option <code class=\"language-text\">Would you like to install additional features with other plugins?</code> navigate straight to <code class=\"language-text\">(Done)</code>.</p>\n<p>Once your project is generated, open it up in you IDE of choice - you can run <code class=\"language-text\">npm run develop</code> inside the project directory to serve a hot-reloading development server on <a href=\"http://localhost:8000\"><code class=\"language-text\">http://localhost:8000</code></a>.</p>\n<p>Let's initialise a git repo for the project. You'll also need to create a remote repo on GitHub where we're going to deploy our blog.</p>\n<br>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\"># (cd blog)\ngit init\ngit remote add origin &lt;your-remote-repo-url-goes-here&gt;</code>\n        </deckgo-highlight-code>\n<br>\n<p>Let's configure all the plugins we're going to need and then we'll write some basic components for our site.</p>\n<h1>Step 2 - Configure Gatsby plugins</h1>\n<p>We're going to install some plugins to use in our project which will add some extra functionality to our Gatsby site:</p>\n<br>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\"># These libraries parse our markdown into HTML (including images and code blocks).\nnpm i gatsby-transformer-remark gatsby-remark-images gatsby-remark-prismjs prismjs gatsby-remark-highlight-code\n\n# This library allows you to query the data from your markdown files (e.g. the titles of articles).\nnpm i gatsby-source-filesystem\n\n# These libraries allow us to render image components.\nnpm i gatsby-plugin-image gatsby-transformer-sharp gatsby-plugin-sharp\n\n# This library will allow us add a manifest (in particular, a favicon) to our site.\nnpm i gatsby-plugin-manifest</code>\n        </deckgo-highlight-code>\n<br>\n<p>For these plugins to take effect, we need to declare them in <code class=\"language-text\">gatsby-config.js</code> in the root of the project. We can add the plugins as string values to the <code class=\"language-text\">plugins</code> attribute of the <code class=\"language-text\">module.export</code>, or we can specify options and sub-plugins by adding an object to the <code class=\"language-text\">plugins</code> array and resolving it by name. You can add as many as you want to add extra functionality to your website.</p>\n<br>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">// gatsby-config.js\nmodule.exports = {\n  siteMetadata: { ... },\n  plugins: [\n    &#39;plugin-name&#39;,\n    ...\n    {\n      resolve: &#39;plugin-name&#39;,\n      options: {\n        plugins: [ /* more plugins here */ ]\n      }\n    }\n  ]\n}\n</code>\n        </deckgo-highlight-code>\n<br>\n<p>Have a look at the <code class=\"language-text\">gatsby-config.js</code> in my project <a href=\"\">here</a>. I also required a small extra commit to set up my code block formatting - you can find that <a href=\"\">here</a></p>\n<p>Now we can create some basic components to use in our project.</p>\n<p><code class=\"language-text\">src/pages/index.js</code> will be our homepage where we'll see the blog previews. I'll let you create a page that you're happy with here (I'm using <a href=\"https://styled-components.com/\"><code class=\"language-text\">styled-components</code></a> and <a href=\"https://blueprintjs.com/docs/\"><code class=\"language-text\">blueprint.js</code></a> for styling and basic components, but use what you're comfortable with). <a href=\"\">Here's the one I made</a>.</p>\n<p>Next, we'll also want to create a component to display the preview of each blog article - our homepage will render some small cards with a preview image and title. Create a <code class=\"language-text\">src/components</code> directory and create a new card-like component for this:</p>\n<br>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">// src/components/BlogPreviewCard/BlogPreviewCard.jsx\nimport { navigate } from &#39;gatsby&#39;\nimport { GatsbyImage, getImage } from &#39;gatsby-plugin-image&#39;\n\nexport const BlogPreviewCard = ({ \n  title,\n  slug,\n  thumbnail,\n  thumbnail_alt,\n  author,\n  minsToRead,\n  datePublished,\n}) =&gt; { \n  const navigateToPost = () =&gt; navigate(slug)\n  return (\n    &lt;StyledCard onClick={navigateToPost}&gt;\n      &lt;GatsbyImage image={getImage(thumbnail)} /&gt;\n      {/* Write some code here that uses the props and returns a card component */}\n    &lt;/StyledCard&gt;\n  )\n}</code>\n        </deckgo-highlight-code>\n<br>\n<p>We will pass the correct props through to the component later. The important thing to understand is that the <code class=\"language-text\">slug</code> is the location of the markdown file you want to show and when we navigate to this address we see the blog post.</p>\n<p>To render images in your React code, you can use <code class=\"language-text\">gatsby-plugin-image</code>.</p>\n<p>You can find the one I made <a href=\"\">here</a>.</p>\n<h1>Step 3 - Write your first article</h1>\n<p>Create a new file called <code class=\"language-text\">src/blog/article-one/index.md</code> and add the metadata as below:</p>\n<br>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">---\ntitle: &quot;Article One&quot;\nslug: blog/article-one\nthumbnail: &quot;./thumbnail.png&quot;\nthumbnail_alt: &quot;thumbnail description&quot;\nauthor: &quot;Your name&quot;\ndate: 2021-08-01\n---\n\n&lt;the-body-of-your-article-goes-here&gt;</code>\n        </deckgo-highlight-code>\n<br>\n<p>You will also need to add in a new file called <code class=\"language-text\">src/blog/article-one/thumbnail.png</code> which will be a thumbnail image for your article.</p>\n<h1>Step 4 - Understanding Gatsby and GraphQL</h1>\n<p>Gatsby allows you to use GraphQL to query site data, however Gatsby abstracts some of the boilerplate away for us, so we need to do our queries in a particular way. We are going to have two main queries on our site: one for our homepage, where we query all the metadata and thumbnails of our articles; and one on our blog post page to get the content of the blog post.</p>\n<p>In both of these components we need to export a <code class=\"language-text\">graphql</code> query for the page. In the background, when generating the pages, Gatsby runs the query and injects the result into the page component (exported as <code class=\"language-text\">default</code>). This gets passed in as the <code class=\"language-text\">data</code> prop.</p>\n<br>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">import { graphql } from &#39;gatsby&#39;;\n\nconst SomeComponent = ({ data }) =&gt; { ... }\nexport default SomeComponent;\n\nexport const query = graphql`\n  // Quey goes here\n`;</code>\n        </deckgo-highlight-code>\n<br>\n<p>If you're looking to find the schema for your Gatsby site, you can go to <a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a> to play around with the sandbox and find what the queries should look like. You can then copy and paste the correct query that you want to pass in to your component into your code.</p>\n<p>Let's return to <code class=\"language-text\">index.js</code> (if you've already added something there) and add a query to the page which will grab all the information we need to show our blog summaries:</p>\n<br>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">// src/pages/index.js\nimport { graphql } from &#39;gatsby&#39;;\nimport { BlogPreviewCard } from &#39;../components/BlogPreviewCard/BlogPreviewCard&#39;\n\nconst IndexPage = ({\n  data: {\n    allMarkdownRemark: { edges }\n  }\n}) =&gt; (\n  &lt;SiteLayout&gt;\n    ...\n    {edges.map(({\n        node: {\n          frontmatter: { slug, ..., thumbnail },\n          timeToRead\n        }\n      }) =&gt; (\n      &lt;BlogPreviewCard slug={slug} ... thumbnail={thumbnail} /&gt;\n    ))}\n  &lt;/SiteLayout&gt;\n)\nexport default IndexPage\n\nexport const query = graphql`\n  query {\n    allMarkdownRemark {\n      edges {\n        node {\n          timeToRead\n          frontmatter {\n            slug\n            title\n            date\n            author\n            thumbnail_alt\n            thumbnail {\n              childImageSharp {\n                gatsbyImageData(\n                  width: 800\n                  placeholder: BLURRED\n                  formats: [AUTO, WEBP, AVIF]\n                )\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`</code>\n        </deckgo-highlight-code>\n<br>\n<p>Now Gatsby is querying data from all our <code class=\"language-text\">MarkdownRemark</code>s and passing the information through to the <code class=\"language-text\">IndexPage</code> to show all our blog previews.</p>\n<h1>Step 5 - Generating pages from markdown files</h1>\n<p>As Gatsby serves static websites, all the pages that we want to generate dynamically get created at build-time. Gatsby will run any script held within the <code class=\"language-text\">gatsby-node.js</code> file on build of the project - this is where we will tell Gatsby to generate our pages.</p>\n<br>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">// gatsby-node.js\nconst path = require(`path`)\n\nexports.createPages = async ({ graphql, actions: { createPage } }) =&gt; {\n  const {\n    data: {\n      allMarkdownRemark: { edges }\n    }\n  } = await graphql(`\n    {\n      allMarkdownRemark(sort: { fields: [frontmatter___date], order: ASC }) {\n        edges {\n          node {\n            frontmatter {\n              slug\n            }\n          }\n        }\n      }\n    }\n  `)\n\n  edges.forEach(\n    ({\n      node: {\n        frontmatter: { slug }\n      }\n    }) =&gt; {\n      createPage({\n        path: slug,\n        component: path.resolve(`./src/templates/BlogPost/BlogPost.jsx`),\n        context: { slug }\n      })\n    }\n  )\n}</code>\n        </deckgo-highlight-code>\n<br>\n<p>We'll now go on to create the actual template component for our actual blog post page that we've used to create a page from.</p>\n<h1>Step 6 - Create our blog post template</h1>\n<p>This will be very simple as we'll mostly be showing some parsed HTML. Create a <code class=\"language-text\">src/templates/BlogPost/BlogPost.jsx</code> file, and create a <code class=\"language-text\">BlogPost</code> component. I've included a snippet below, but you can make this however you like.</p>\n<br>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">// src/templates/BlogPost/BlogPost.jsx\nimport { StaticImage } from &#39;gatsby-plugin-image&#39;\n\nconst BlogPost = ({\n    data: { \n        markdownRemark: { html } \n    }}\n) =&gt; (\n    &lt;SiteLayout&gt;\n      ...\n      &lt;div dangerouslySetInnerHTML={{ __html: html }} /&gt;\n    &lt;/SiteLayout&gt;\n)\nexport default BlogPost\n\n// You can also grab any extra fields from the frontmatter that you need\nexport const query = graphql`\n  query ($slug: String!) {\n    markdownRemark(frontmatter: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        ...\n      }\n    }\n  }\n`</code>\n        </deckgo-highlight-code>\n<br>\n<p>The important thing to understand here is that Gatsby is using the <code class=\"language-text\">gatsby-transformer-remark</code> plugin to transform our markdown file into HTML, which is being passed to our template component and rendered using <code class=\"language-text\">dangerouslySetInnerHTML={{ __html: html }}</code>.</p>\n<p>We now have a main page which queries all the markdown files and displays a preview for each one based on the metadata. When we click on the card, it navigates us to the correct blog post. We also have a page being generated for each blog post which we've written.</p>\n<p>Run <code class=\"language-text\">npm run develop</code> to see your site locally and check that you can see a blog preview which links to your new article.</p>\n<h1>Step 7 - Deploy to GitHub Pages</h1>\n<p>We will be using the <code class=\"language-text\">gh-pages</code> library to help us deploy to GitHub Pages.</p>\n<br>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">npm install gh-pages --save-dev</code>\n        </deckgo-highlight-code>\n<br>\n<p>Let's add a deploy script to our <code class=\"language-text\">package.json</code> which we can run every time we want to publish our site.</p>\n<br>\n<deckgo-highlight-code language=\"json\" terminal=\"carbon\" theme=\"material\" line-numbers=\"true\"  >\n          <code slot=\"code\">{\n  ...\n  &quot;scripts&quot;: {\n    &quot;deploy&quot;: &quot;gatsby clean &amp;&amp; gatsby build --prefix-paths &amp;&amp; gh-pages -d public -b gh-pages&quot;,\n    ...\n  },\n  &quot;dependencies&quot;: { ... }\n}</code>\n        </deckgo-highlight-code>\n<br>\n<p>We can now deploy whenever we want by running <code class=\"language-text\">npm run deploy</code>.</p>\n<p>This script clears the project cache and creates a new build. In my <code class=\"language-text\">gatsby-config.js</code>, I have a path parameter set <code class=\"language-text\">pathPrefix: '/blog'</code> which sets the path prefix. The script then builds with <code class=\"language-text\">gh-pages</code>, taking from the <code class=\"language-text\">public</code> directory that <code class=\"language-text\">gatsby build</code> created and pushes the result to a branch on the remote called <code class=\"language-text\">gh-pages</code>.</p>\n<p>We can now go to our remote repo on GitHub and should see a new <code class=\"language-text\">gh-pages</code> branch. Now all we need to do is configure the pages site of the repo. This is done by doing to <code class=\"language-text\">Settings > Pages</code> in our repo and setting the <code class=\"language-text\">Source</code> to <code class=\"language-text\">Branch: gh-pages</code>, <code class=\"language-text\">/(root)</code>.</p>\n<p>After a few minutes your site will be deployed!</p>\n<h1>Summary</h1>\n<p>After floowing this article you should have learned:</p>\n<ul>\n<li>How to generate a new Gatsby project.</li>\n<li>How to add and configure Gatsby plugins to customise your site.</li>\n<li>How to query Gatsby site data through GraphQL.</li>\n<li>How to dynamically generate pages from a template.</li>\n<li>How to deploy a Gatsby project to GitHub Pages.</li>\n</ul>\n<p>You can use this knowledge to add</p>\n<p>If you want a quick-start to your project, you can clone <a href=\"\">my GitHub repo</a> and customise the styling to your liking.</p>","frontmatter":{"date":"August 01, 2021","slug":"blog/2021/08/building-your-own-blog-with-gatsby-and-github-pages","title":"Build your own blog with Gatsby and GitHub Pages for free","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABP0lEQVQY032QzyuDcRzHX8+zxw6sXGiJJqWdVnJzkR8X3CY/5iDJ0opCCEuJ4rLLiF0U20GmuKgd1NQu/gQXF1dOS7Y99X2+3+2rZxxceB8/9X693+8P86EUWmuSS7m+5FKubXP4mm8Z/CettVGtVhFC+B3HCdZqNYrFIrw+v5OI3p8lovf6YOb2bbr9JKQnNaZhjQItP/5mwAP0/gK6sB4pZUYpdec4TsQNoIvl1sx+4XM3nNV7kzf6NFZYB4KWp2EH2AK2gUMgDqSAFa/XuwD4tNZHtm33u3Cl1FWlUmmqJ53HHy+ziSed2nj4OInl3RZej2nNAFPAHDAEjAGzwIRlWRuuT0o5XiqVFqWUYaXUsXsj0pl0F3jWBtMjqwPp7vzFS32SaZp/vc8wDMMXCATqZcrlsl8I0WHbdqMQgi8fPZOzsUrb7AAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/blog/static/f694608e975a67063dac6fa6efc3422f/821da/thumbnail.png","srcSet":"/blog/static/f694608e975a67063dac6fa6efc3422f/22719/thumbnail.png 185w,\n/blog/static/f694608e975a67063dac6fa6efc3422f/b91c6/thumbnail.png 370w,\n/blog/static/f694608e975a67063dac6fa6efc3422f/821da/thumbnail.png 740w","sizes":"(min-width: 740px) 740px, 100vw"},"sources":[{"srcSet":"/blog/static/f694608e975a67063dac6fa6efc3422f/6b17e/thumbnail.avif 185w,\n/blog/static/f694608e975a67063dac6fa6efc3422f/097b8/thumbnail.avif 370w,\n/blog/static/f694608e975a67063dac6fa6efc3422f/3950a/thumbnail.avif 740w","type":"image/avif","sizes":"(min-width: 740px) 740px, 100vw"},{"srcSet":"/blog/static/f694608e975a67063dac6fa6efc3422f/4d5e6/thumbnail.webp 185w,\n/blog/static/f694608e975a67063dac6fa6efc3422f/bb639/thumbnail.webp 370w,\n/blog/static/f694608e975a67063dac6fa6efc3422f/4baf0/thumbnail.webp 740w","type":"image/webp","sizes":"(min-width: 740px) 740px, 100vw"}]},"width":800,"height":196.75675675675677}}}}}},"pageContext":{"slug":"blog/2021/08/building-your-own-blog-with-gatsby-and-github-pages"}},"staticQueryHashes":[]}